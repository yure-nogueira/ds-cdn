{"version":3,"names":["ApiCart","getCart","rawResponse","fetch","process","env","AJAX_URL","method","headers","body","URLSearchParams","Object","assign","action","API_CART_ACTIONS","response","json","data","rawData","camelcaseKeys","deep","cart","cartTotal","cartCount","addToCart","productIdNumber","quantityNumber","productId","toString","quantity","additionalData","addedToCartData","removeFromCart","updateCart","cartItemKey"],"sources":["src/utils/api/ecommerce/cart.api.ts"],"sourcesContent":["import camelcaseKeys from 'camelcase-keys';\r\nimport { ActionCart, CartInfo } from './utils/interfaces/cart.interface';\r\nimport { ApiResponse } from './utils/interfaces/responses.interface';\r\nimport { API_CART_ACTIONS } from './utils/constants/requests.constant';\r\n\r\nexport class ApiCart {\r\n  static async getCart() {\r\n    const rawResponse = await fetch(`${process.env.AJAX_URL}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: new URLSearchParams(\r\n        Object.assign({ action: API_CART_ACTIONS.getCart }),\r\n      ),\r\n    });\r\n\r\n    const response: ApiResponse = await rawResponse.json();\r\n    const { data: rawData } = response;\r\n    const data = camelcaseKeys(rawData, { deep: true });\r\n    const { cart, cartTotal, cartCount }: CartInfo = data;\r\n\r\n    return { cart, cartTotal, cartCount };\r\n  }\r\n\r\n  static async addToCart(productIdNumber: number, quantityNumber: number) {\r\n    const productId = productIdNumber.toString();\r\n    const quantity = quantityNumber.toString();\r\n    const additionalData = { productId, quantity };\r\n\r\n    const rawResponse = await fetch(`${process.env.AJAX_URL}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: new URLSearchParams(\r\n        Object.assign({ action: API_CART_ACTIONS.addToCart }, additionalData),\r\n      ),\r\n    });\r\n\r\n    const response: ApiResponse = await rawResponse.json();\r\n    const { data } = response;\r\n    const addedToCartData: ActionCart = camelcaseKeys(data, {\r\n      deep: true,\r\n    });\r\n\r\n    return addedToCartData;\r\n  }\r\n\r\n  static async removeFromCart(productId: number) {\r\n    const rawResponse = await fetch(`${process.env.AJAX_URL}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: new URLSearchParams({\r\n        action: API_CART_ACTIONS.removeFromCart,\r\n        productId: `${productId}`,\r\n      }),\r\n    });\r\n\r\n    const response: ApiResponse = await rawResponse.json();\r\n    const { data: rawData } = response;\r\n    const data: ActionCart = camelcaseKeys(rawData, { deep: true });\r\n    return data;\r\n  }\r\n\r\n  static async updateCart(cartItemKey: string, quantityNumber: number) {\r\n    const quantity = quantityNumber.toString();\r\n    const additionalData = { cartItemKey, quantity };\r\n\r\n    const rawResponse = await fetch(`${process.env.AJAX_URL}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: new URLSearchParams(\r\n        Object.assign({ action: API_CART_ACTIONS.updateCart }, additionalData),\r\n      ),\r\n    });\r\n\r\n    const response: ApiResponse = await rawResponse.json();\r\n    const { data: rawData } = response;\r\n    const data: ActionCart = camelcaseKeys(rawData, { deep: true });\r\n    return data;\r\n  }\r\n}\r\n"],"mappings":"yEAKaA,EACX,oBAAaC,GACX,MAAMC,QAAoBC,MAAM,GAAGC,QAAQC,IAAIC,WAAY,CACzDC,OAAQ,OACRC,QAAS,CACP,eAAgB,qCAElBC,KAAM,IAAIC,gBACRC,OAAOC,OAAO,CAAEC,OAAQC,EAAiBb,aAI7C,MAAMc,QAA8Bb,EAAYc,OAChD,MAAQC,KAAMC,GAAYH,EAC1B,MAAME,EAAOE,EAAcD,EAAS,CAAEE,KAAM,OAC5C,MAAMC,KAAEA,EAAIC,UAAEA,EAASC,UAAEA,GAAwBN,EAEjD,MAAO,CAAEI,OAAMC,YAAWC,Y,CAG5B,sBAAaC,CAAUC,EAAyBC,GAC9C,MAAMC,EAAYF,EAAgBG,WAClC,MAAMC,EAAWH,EAAeE,WAChC,MAAME,EAAiB,CAAEH,YAAWE,YAEpC,MAAM3B,QAAoBC,MAAM,GAAGC,QAAQC,IAAIC,WAAY,CACzDC,OAAQ,OACRC,QAAS,CACP,eAAgB,qCAElBC,KAAM,IAAIC,gBACRC,OAAOC,OAAO,CAAEC,OAAQC,EAAiBU,WAAaM,MAI1D,MAAMf,QAA8Bb,EAAYc,OAChD,MAAMC,KAAEA,GAASF,EACjB,MAAMgB,EAA8BZ,EAAcF,EAAM,CACtDG,KAAM,OAGR,OAAOW,C,CAGT,2BAAaC,CAAeL,GAC1B,MAAMzB,QAAoBC,MAAM,GAAGC,QAAQC,IAAIC,WAAY,CACzDC,OAAQ,OACRC,QAAS,CACP,eAAgB,qCAElBC,KAAM,IAAIC,gBAAgB,CACxBG,OAAQC,EAAiBkB,eACzBL,UAAW,GAAGA,QAIlB,MAAMZ,QAA8Bb,EAAYc,OAChD,MAAQC,KAAMC,GAAYH,EAC1B,MAAME,EAAmBE,EAAcD,EAAS,CAAEE,KAAM,OACxD,OAAOH,C,CAGT,uBAAagB,CAAWC,EAAqBR,GAC3C,MAAMG,EAAWH,EAAeE,WAChC,MAAME,EAAiB,CAAEI,cAAaL,YAEtC,MAAM3B,QAAoBC,MAAM,GAAGC,QAAQC,IAAIC,WAAY,CACzDC,OAAQ,OACRC,QAAS,CACP,eAAgB,qCAElBC,KAAM,IAAIC,gBACRC,OAAOC,OAAO,CAAEC,OAAQC,EAAiBmB,YAAcH,MAI3D,MAAMf,QAA8Bb,EAAYc,OAChD,MAAQC,KAAMC,GAAYH,EAC1B,MAAME,EAAmBE,EAAcD,EAAS,CAAEE,KAAM,OACxD,OAAOH,C"}