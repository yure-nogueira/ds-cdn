import{r as t,c as e,h as o,H as s}from"./p-5c36ed66.js";import{A as a}from"./p-228049e3.js";import{A as c,c as n}from"./p-e5dad5d1.js";import"./p-e5cf9adb.js";const i=".product-info__message.sc-tp-elem-product-info{display:block;margin-top:24px}";const r=i;const l=class{constructor(o){t(this,o);this.updatedCart=e(this,"updatedCart",7);this.productId=undefined;this.productInfo=undefined}async handleAddToCart(t){const{productId:e,quantity:o}=t.detail;try{const{success:t,productName:s,cart:c,cartTotal:n,cartCount:i}=await a.addToCart(e,o);this.productInfo=Object.assign(Object.assign({},this.productInfo),{isFeedbackSuccess:t});if(this.productInfo.isFeedbackSuccess){this.productInfo=Object.assign(Object.assign({},this.productInfo),{feedbackMessage:`${s} foi adicionado ao carrinho!`});const t={cart:c,cartTotal:n,cartCount:i};this.updatedCart.emit(t)}else{this.productInfo=Object.assign(Object.assign({},this.productInfo),{feedbackMessage:`${s} não foi adicionado ao carrinho!`})}}catch(t){console.error(t)}}handleUpdatedCartCount(t){console.log(t.detail)}async componentWillLoad(){await this.updateProductData()}async updateProductData(){const[t,e]=await Promise.all([await c.getProductById(this.productId),await c.getCategories()]);this.productInfo=Object.assign(Object.assign({},t),{isFeedbackSuccess:false,feedbackMessage:""});this.categoriesWithUrl=t.categories.map((t=>e.find((e=>e.id==t.id))))}render(){const{productId:t,categoriesWithUrl:e}=this;const{name:a,description:c,images:i,manageStock:r,stockStatus:l,stockQuantity:p,type:u,externalUrl:d,regularPrice:h,price:b,onSale:m,sku:f,categories:g,attributes:x,isFeedbackSuccess:y,feedbackMessage:k}=this.productInfo;const j={id:t,stockQuantity:p,stockStatus:l,type:u};const C=r&&p>=1||!r&&l==="instock";const O=p==1?` (${p} unidade)`:` (${p} unidades)`;const S=x.map((t=>{const{name:e,options:s}=t;return o("ion-text",{color:"neutral-8","tp-type":"p14x"},o("span",null,e,": ",s.join(", ")))}));const _=e.map((t=>{const{name:e,url:s}=t;return o("ion-button",{color:"brand",fill:"clear",href:s},e)}));return o(s,null,o("div",{class:"product-info"},o("tp-elem-product-detail",{productData:j},o("tp-images-carousel",{slot:"image",images:i,thumbs:i.length>1,zoom:true}),o("ion-text",{"tp-type":"h32x",slot:"title"},o("h2",null,a)),m&&h&&o("ion-text",{color:"neutral-7","tp-type":"p16x",slot:"regular-price"},o("span",null,n(h,"pt-br"))),o("ion-text",{color:"neutral-7","tp-type":"p16xb",slot:"price"},o("span",null,n(b,"pt-br"))),o("ion-text",{color:"neutral-8","tp-type":"p16x",slot:"description"},o("p",null,c.replace("<p>","").replace("</p>",""))),o("div",{slot:"stock"},o("ion-text",{color:"neutral-8","tp-type":"p14x"},o("p",null,C?"Produto em estoque":"Produto esgotado",r&&O))),o("ion-text",{color:"neutral-8","tp-type":"p14x",slot:"sku"},o("span",null,"SKU: ",f)),x&&o("div",{slot:"attributes"},S),g&&o("div",{slot:"categories"},o("ion-text",{color:"neutral-8","tp-type":"p14x"},o("span",null,"Categorias:")),_),o("ion-button",{color:"brand",href:d,target:"_blank",slot:"action"},"Comprar (página externa)")),k&&o("ion-text",{class:"product-info__message",color:y?"success":"warning","tp-type":"p16x"},o("p",null,k))))}};l.style=r;export{l as tp_elem_product_info};
//# sourceMappingURL=p-f94800e4.entry.js.map