{"version":3,"names":["TP_CALENDAR","icons","chevronRight","getAssetPath","chevronLeft","chevronDown","weekdays","timeframes","week","month","directions","left","right","GestureController","constructor","this","gestureId","requestedStart","Map","disabledGestures","disabledScroll","Set","createGesture","config","GestureDelegate","newID","name","priority","disableScroll","createBlocker","opts","BlockerDelegate","disable","start","gestureName","id","canStart","delete","set","capture","maxPriority","forEach","value","Math","max","capturedId","clear","event","CustomEvent","detail","document","dispatchEvent","release","undefined","disableGesture","get","add","enableGesture","size","body","classList","BACKDROP_NO_SCROLL","enableScroll","remove","isDisabled","isCaptured","isScrollDisabled","disabled","ctrl","captured","destroy","block","gesture","unblock","GESTURE_CONTROLLER","addEventListener","el","eventName","callback","listenerOpts","supportsPassive","passive","node","_sPassive","Object","defineProperty","e","MOUSE_WAIT","createPointerEvents","pointerDown","pointerMove","pointerUp","options","rmTouchStart","rmTouchMove","rmTouchEnd","rmTouchCancel","rmMouseStart","rmMouseMove","rmMouseUp","lastTouchEvent","handleTouchStart","ev","Date","now","handleTouchEnd","handleMouseDown","getDocument","handleMouseUp","stopTouch","stopMouse","stop","enable","isEnabled","Document","ownerDocument","createPanRecognizer","direction","thresh","maxAngle","radians","PI","isDirX","maxCosine","cos","threshold","startX","startY","dirty","isPan","x","y","detect","deltaX","deltaY","distance","hypotenuse","sqrt","cosine","isGesture","getDirection","hasCapturedPan","hasStartedPan","hasFiredStart","isMoveQueued","finalConfig","assign","gesturePriority","onWillStart","onStart","onEnd","notCaptured","onMove","blurOnStart","type","startTime","currentX","currentY","velocityX","velocityY","currentTime","data","pan","timeStamp","updateDetail","tryToCapturePan","calcGestureData","requestAnimationFrame","fireOnMove","abortGesture","then","fireOnStart","blurActiveElement","activeElement","blur","reset","tmpHasCaptured","tmpHasFiredStart","pointerEvents","prevX","prevY","prevT","timestamp","timeDelta","changedTouches","length","touch","clientX","clientY","pageX","pageY","calendarCss","TpCalendarStyle0","TpCalendar","onTimeframeToggle","currentTimeframe","_a","timeframe","initialTimeframe","tpTimeframeToggle","emit","onCalendarChange","tpCalendarChange","setupGesture","container","disconnectGesture","componentDidLoad","disconnectedCallback","render","color","label","h","Host","key","class","createColorClasses","fill","onClick","slot","src","map","day","ref"],"sources":["src/components/core/calendar/utils/calendar.constant.ts","src/components/core/calendar/utils/gesture/gesture-controller.ts","src/components/core/calendar/utils/gesture/listener.ts","src/components/core/calendar/utils/gesture/pointer-events.ts","src/components/core/calendar/utils/gesture/recognizers.ts","src/components/core/calendar/utils/gesture/index.ts","src/components/core/calendar/calendar.scss?tag=tp-calendar&encapsulation=scoped","src/components/core/calendar/calendar.tsx"],"sourcesContent":["import { getAssetPath } from '@stencil/core';\r\nimport { TpCalendarConfig } from './calendar.type';\r\n\r\nexport const TP_CALENDAR: TpCalendarConfig = {\r\n  icons: {\r\n    chevronRight: getAssetPath('./assets/tp-chevron-right.svg'),\r\n    chevronLeft: getAssetPath('./assets/tp-chevron-left.svg'),\r\n    chevronDown: getAssetPath('./assets/tp-chevron-down.svg'),\r\n  },\r\n  weekdays: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sab', 'Dom'],\r\n  timeframes: {\r\n    week: 'Semana',\r\n    month: 'Mês',\r\n  },\r\n  directions: {\r\n    left: 'left',\r\n    right: 'right',\r\n  },\r\n};\r\n","\r\nclass GestureController {\r\n\r\n  private gestureId = 0;\r\n  private requestedStart = new Map<number, number>();\r\n  private disabledGestures = new Map<string, Set<number>>();\r\n  private disabledScroll = new Set<number>();\r\n  private capturedId?: number;\r\n\r\n  /**\r\n   * Creates a gesture delegate based on the GestureConfig passed\r\n   */\r\n  createGesture(config: GestureConfig): GestureDelegate {\r\n    return new GestureDelegate(\r\n      this,\r\n      this.newID(),\r\n      config.name,\r\n      config.priority || 0,\r\n      !!config.disableScroll\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Creates a blocker that will block any other gesture events from firing. Set in the ion-gesture component.\r\n   */\r\n  createBlocker(opts: BlockerConfig = {}): BlockerDelegate {\r\n    return new BlockerDelegate(\r\n      this,\r\n      this.newID(),\r\n      opts.disable,\r\n      !!opts.disableScroll\r\n    );\r\n  }\r\n\r\n  start(gestureName: string, id: number, priority: number): boolean {\r\n    if (!this.canStart(gestureName)) {\r\n      this.requestedStart.delete(id);\r\n      return false;\r\n    }\r\n    this.requestedStart.set(id, priority);\r\n    return true;\r\n  }\r\n\r\n  capture(gestureName: string, id: number, priority: number): boolean {\r\n    if (!this.start(gestureName, id, priority)) {\r\n      return false;\r\n    }\r\n    const requestedStart = this.requestedStart;\r\n    let maxPriority = -10000;\r\n\r\n    requestedStart.forEach(value => {\r\n      maxPriority = Math.max(maxPriority, value);\r\n    });\r\n\r\n    if (maxPriority === priority) {\r\n      this.capturedId = id;\r\n      requestedStart.clear();\r\n\r\n      const event = new CustomEvent('ionGestureCaptured', { detail: { gestureName } });\r\n      document.dispatchEvent(event);\r\n      return true;\r\n    }\r\n    requestedStart.delete(id);\r\n\r\n    return false;\r\n  }\r\n\r\n  release(id: number) {\r\n    this.requestedStart.delete(id);\r\n\r\n    if (this.capturedId === id) {\r\n      this.capturedId = undefined;\r\n    }\r\n  }\r\n\r\n  disableGesture(gestureName: string, id: number) {\r\n    let set = this.disabledGestures.get(gestureName);\r\n    if (set === undefined) {\r\n      set = new Set<number>();\r\n      this.disabledGestures.set(gestureName, set);\r\n    }\r\n    set.add(id);\r\n  }\r\n\r\n  enableGesture(gestureName: string, id: number) {\r\n    const set = this.disabledGestures.get(gestureName);\r\n    if (set !== undefined) {\r\n      set.delete(id);\r\n    }\r\n  }\r\n\r\n  disableScroll(id: number) {\r\n    this.disabledScroll.add(id);\r\n    if (this.disabledScroll.size === 1) {\r\n      document.body.classList.add(BACKDROP_NO_SCROLL);\r\n    }\r\n  }\r\n\r\n  enableScroll(id: number) {\r\n    this.disabledScroll.delete(id);\r\n    if (this.disabledScroll.size === 0) {\r\n      document.body.classList.remove(BACKDROP_NO_SCROLL);\r\n    }\r\n  }\r\n\r\n  canStart(gestureName: string): boolean {\r\n    if (this.capturedId !== undefined) {\r\n      // a gesture already captured\r\n      return false;\r\n    }\r\n\r\n    if (this.isDisabled(gestureName)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  isCaptured(): boolean {\r\n    return this.capturedId !== undefined;\r\n  }\r\n\r\n  isScrollDisabled(): boolean {\r\n    return this.disabledScroll.size > 0;\r\n  }\r\n\r\n  isDisabled(gestureName: string): boolean {\r\n    const disabled = this.disabledGestures.get(gestureName);\r\n    if (disabled && disabled.size > 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private newID(): number {\r\n    this.gestureId++;\r\n    return this.gestureId;\r\n  }\r\n}\r\n\r\nclass GestureDelegate {\r\n  private ctrl?: GestureController;\r\n  private priority: number;\r\n\r\n  constructor(\r\n    ctrl: GestureController,\r\n    private id: number,\r\n    private name: string,\r\n    priority: number,\r\n    private disableScroll: boolean\r\n  ) {\r\n    this.priority = priority * 1000000 + id;\r\n    this.ctrl = ctrl;\r\n  }\r\n\r\n  canStart(): boolean {\r\n    if (!this.ctrl) {\r\n      return false;\r\n    }\r\n\r\n    return this.ctrl.canStart(this.name);\r\n  }\r\n\r\n  start(): boolean {\r\n    if (!this.ctrl) {\r\n      return false;\r\n    }\r\n\r\n    return this.ctrl.start(this.name, this.id, this.priority);\r\n  }\r\n\r\n  capture(): boolean {\r\n    if (!this.ctrl) {\r\n      return false;\r\n    }\r\n\r\n    const captured = this.ctrl.capture(this.name, this.id, this.priority);\r\n    if (captured && this.disableScroll) {\r\n      this.ctrl.disableScroll(this.id);\r\n    }\r\n\r\n    return captured;\r\n  }\r\n\r\n  release() {\r\n    if (this.ctrl) {\r\n      this.ctrl.release(this.id);\r\n\r\n      if (this.disableScroll) {\r\n        this.ctrl.enableScroll(this.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.release();\r\n    this.ctrl = undefined;\r\n  }\r\n}\r\n\r\nclass BlockerDelegate {\r\n\r\n  private ctrl?: GestureController;\r\n\r\n  constructor(\r\n    ctrl: GestureController,\r\n    private id: number,\r\n    private disable: string[] | undefined,\r\n    private disableScroll: boolean\r\n  ) {\r\n    this.ctrl = ctrl;\r\n  }\r\n\r\n  block() {\r\n    if (!this.ctrl) {\r\n      return;\r\n    }\r\n    if (this.disable) {\r\n      for (const gesture of this.disable) {\r\n        this.ctrl.disableGesture(gesture, this.id);\r\n      }\r\n    }\r\n\r\n    if (this.disableScroll) {\r\n      this.ctrl.disableScroll(this.id);\r\n    }\r\n  }\r\n\r\n  unblock() {\r\n    if (!this.ctrl) {\r\n      return;\r\n    }\r\n    if (this.disable) {\r\n      for (const gesture of this.disable) {\r\n        this.ctrl.enableGesture(gesture, this.id);\r\n      }\r\n    }\r\n    if (this.disableScroll) {\r\n      this.ctrl.enableScroll(this.id);\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.unblock();\r\n    this.ctrl = undefined;\r\n  }\r\n}\r\n\r\nexport interface GestureConfig {\r\n  name: string;\r\n  priority?: number;\r\n  disableScroll?: boolean;\r\n}\r\n\r\nexport interface BlockerConfig {\r\n  disable?: string[];\r\n  disableScroll?: boolean;\r\n}\r\n\r\nconst BACKDROP_NO_SCROLL = 'backdrop-no-scroll';\r\nexport const GESTURE_CONTROLLER = new GestureController();\r\n","\r\nexport const addEventListener = (\r\n  el: any,\r\n  eventName: string,\r\n  callback: EventListenerOrEventListenerObject,\r\n  opts: {\r\n    passive?: boolean;\r\n    capture?: boolean\r\n  }\r\n): (() => void) => {\r\n  // use event listener options when supported\r\n  // otherwise it's just a boolean for the \"capture\" arg\r\n  const listenerOpts = supportsPassive(el) ? {\r\n    'capture': !!opts.capture,\r\n    'passive': !!opts.passive,\r\n  } : !!opts.capture;\r\n\r\n  let add: string;\r\n  let remove: string;\r\n  if (el['__zone_symbol__addEventListener']) {\r\n    add = '__zone_symbol__addEventListener';\r\n    remove = '__zone_symbol__removeEventListener';\r\n  } else {\r\n    add = 'addEventListener';\r\n    remove = 'removeEventListener';\r\n  }\r\n\r\n  el[add](eventName, callback, listenerOpts);\r\n  return () => {\r\n    el[remove](eventName, callback, listenerOpts);\r\n  };\r\n};\r\n\r\nconst supportsPassive = (node: Node) => {\r\n  if (_sPassive === undefined) {\r\n    try {\r\n      const opts = Object.defineProperty({}, 'passive', {\r\n        get: () => {\r\n          _sPassive = true;\r\n        }\r\n      });\r\n      node.addEventListener('optsTest', () => { return; }, opts);\r\n    } catch (e) {\r\n      _sPassive = false;\r\n    }\r\n  }\r\n  return !!_sPassive;\r\n};\r\n\r\nlet _sPassive: boolean | undefined;\r\n","import { addEventListener } from './listener';\r\n\r\nconst MOUSE_WAIT = 2000;\r\n\r\nexport const createPointerEvents = (\r\n  el: Node,\r\n  pointerDown: any,\r\n  pointerMove: any,\r\n  pointerUp: any,\r\n  options: {\r\n    passive?: boolean;\r\n    capture?: boolean\r\n  }\r\n) => {\r\n\r\n  let rmTouchStart: (() => void) | undefined;\r\n  let rmTouchMove: (() => void) | undefined;\r\n  let rmTouchEnd: (() => void) | undefined;\r\n  let rmTouchCancel: (() => void) | undefined;\r\n  let rmMouseStart: (() => void) | undefined;\r\n  let rmMouseMove: (() => void) | undefined;\r\n  let rmMouseUp: (() => void) | undefined;\r\n  let lastTouchEvent = 0;\r\n\r\n  const handleTouchStart = (ev: any) => {\r\n    lastTouchEvent = Date.now() + MOUSE_WAIT;\r\n    if (!pointerDown(ev)) {\r\n      return;\r\n    }\r\n    if (!rmTouchMove && pointerMove) {\r\n      rmTouchMove = addEventListener(el, 'touchmove', pointerMove, options);\r\n    }\r\n    if (!rmTouchEnd) {\r\n      rmTouchEnd = addEventListener(el, 'touchend', handleTouchEnd, options);\r\n    }\r\n    if (!rmTouchCancel) {\r\n      rmTouchCancel = addEventListener(el, 'touchcancel', handleTouchEnd, options);\r\n    }\r\n  };\r\n\r\n  const handleMouseDown = (ev: any) => {\r\n    if (lastTouchEvent > Date.now()) {\r\n      return;\r\n    }\r\n    if (!pointerDown(ev)) {\r\n      return;\r\n    }\r\n    if (!rmMouseMove && pointerMove) {\r\n      rmMouseMove = addEventListener(getDocument(el), 'mousemove', pointerMove, options);\r\n    }\r\n    if (!rmMouseUp) {\r\n      rmMouseUp = addEventListener(getDocument(el), 'mouseup', handleMouseUp, options);\r\n    }\r\n  };\r\n\r\n  const handleTouchEnd = (ev: any) => {\r\n    stopTouch();\r\n    if (pointerUp) {\r\n      pointerUp(ev);\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = (ev: any) => {\r\n    stopMouse();\r\n    if (pointerUp) {\r\n      pointerUp(ev);\r\n    }\r\n  };\r\n\r\n  const stopTouch = () => {\r\n    if (rmTouchMove) {\r\n      rmTouchMove();\r\n    }\r\n    if (rmTouchEnd) {\r\n      rmTouchEnd();\r\n    }\r\n    if (rmTouchCancel) {\r\n      rmTouchCancel();\r\n    }\r\n    rmTouchMove = rmTouchEnd = rmTouchCancel = undefined;\r\n  };\r\n\r\n  const stopMouse = () => {\r\n    if (rmMouseMove) {\r\n      rmMouseMove();\r\n    }\r\n    if (rmMouseUp) {\r\n      rmMouseUp();\r\n    }\r\n    rmMouseMove = rmMouseUp = undefined;\r\n  };\r\n\r\n  const stop = () => {\r\n    stopTouch();\r\n    stopMouse();\r\n  };\r\n\r\n  const enable = (isEnabled = true) => {\r\n    if (!isEnabled) {\r\n      if (rmTouchStart) {\r\n        rmTouchStart();\r\n      }\r\n      if (rmMouseStart) {\r\n        rmMouseStart();\r\n      }\r\n      rmTouchStart = rmMouseStart = undefined;\r\n      stop();\r\n\r\n    } else {\r\n      if (!rmTouchStart) {\r\n        rmTouchStart = addEventListener(el, 'touchstart', handleTouchStart, options);\r\n      }\r\n      if (!rmMouseStart) {\r\n        rmMouseStart = addEventListener(el, 'mousedown', handleMouseDown, options);\r\n      }\r\n    }\r\n  };\r\n\r\n  const destroy = () => {\r\n    enable(false);\r\n    pointerUp = pointerMove = pointerDown = undefined;\r\n  };\r\n\r\n  return {\r\n    enable,\r\n    stop,\r\n    destroy\r\n  };\r\n};\r\n\r\nconst getDocument = (node: Node) => {\r\n  return node instanceof Document ? node : node.ownerDocument;\r\n};\r\n\r\nexport interface PointerEventsConfig {\r\n  element?: HTMLElement;\r\n  pointerDown: (ev: any) => boolean;\r\n  pointerMove?: (ev: any) => void;\r\n  pointerUp?: (ev: any) => void;\r\n  zone?: boolean;\r\n  capture?: boolean;\r\n  passive?: boolean;\r\n}\r\n","\r\nexport interface PanRecognizer {\r\n  start(x: number, y: number): void;\r\n  detect(x: number, y: number): boolean;\r\n  isGesture(): boolean;\r\n  getDirection(): number;\r\n}\r\n\r\nexport const createPanRecognizer = (direction: string, thresh: number, maxAngle: number): PanRecognizer => {\r\n  const radians = maxAngle * (Math.PI / 180);\r\n  const isDirX = direction === 'x';\r\n  const maxCosine = Math.cos(radians);\r\n  const threshold = thresh * thresh;\r\n\r\n  let startX = 0;\r\n  let startY = 0;\r\n\r\n  let dirty = false;\r\n  let isPan = 0;\r\n\r\n  return {\r\n    start(x: number, y: number) {\r\n      startX = x;\r\n      startY = y;\r\n      isPan = 0;\r\n      dirty = true;\r\n    },\r\n\r\n    detect(x: number, y: number): boolean {\r\n      if (!dirty) {\r\n        return false;\r\n      }\r\n\r\n      const deltaX = (x - startX);\r\n      const deltaY = (y - startY);\r\n      const distance = deltaX * deltaX + deltaY * deltaY;\r\n\r\n      if (distance < threshold) {\r\n        return false;\r\n      }\r\n      const hypotenuse = Math.sqrt(distance);\r\n      const cosine = (isDirX ? deltaX : deltaY) / hypotenuse;\r\n\r\n      if (cosine > maxCosine) {\r\n        isPan = 1;\r\n\r\n      } else if (cosine < -maxCosine) {\r\n        isPan = -1;\r\n\r\n      } else {\r\n        isPan = 0;\r\n      }\r\n\r\n      dirty = false;\r\n      return true;\r\n    },\r\n\r\n    isGesture(): boolean {\r\n      return isPan !== 0;\r\n    },\r\n\r\n    getDirection(): number {\r\n      return isPan;\r\n    }\r\n  };\r\n};\r\n","import { GESTURE_CONTROLLER } from './gesture-controller';\r\nimport { createPointerEvents } from './pointer-events';\r\nimport { createPanRecognizer } from './recognizers';\r\n\r\nexport const createGesture = (config: GestureConfig): Gesture => {\r\n  let hasCapturedPan = false;\r\n  let hasStartedPan = false;\r\n  let hasFiredStart = true;\r\n  let isMoveQueued = false;\r\n\r\n  const finalConfig = {\r\n    disableScroll: false,\r\n    direction: 'x',\r\n    gesturePriority: 0,\r\n    passive: true,\r\n    maxAngle: 40,\r\n    threshold: 10,\r\n\r\n    ...config,\r\n  };\r\n\r\n  const canStart = finalConfig.canStart;\r\n  const onWillStart = finalConfig.onWillStart;\r\n  const onStart = finalConfig.onStart;\r\n  const onEnd = finalConfig.onEnd;\r\n  const notCaptured = finalConfig.notCaptured;\r\n  const onMove = finalConfig.onMove;\r\n  const threshold = finalConfig.threshold;\r\n  const passive = finalConfig.passive;\r\n  const blurOnStart = finalConfig.blurOnStart;\r\n\r\n  const detail = {\r\n    type: 'pan',\r\n    startX: 0,\r\n    startY: 0,\r\n    startTime: 0,\r\n    currentX: 0,\r\n    currentY: 0,\r\n    velocityX: 0,\r\n    velocityY: 0,\r\n    deltaX: 0,\r\n    deltaY: 0,\r\n    currentTime: 0,\r\n    event: undefined as any,\r\n    data: undefined,\r\n  };\r\n\r\n  const pan = createPanRecognizer(\r\n    finalConfig.direction,\r\n    finalConfig.threshold,\r\n    finalConfig.maxAngle,\r\n  );\r\n  const gesture = GESTURE_CONTROLLER.createGesture({\r\n    name: config.gestureName,\r\n    priority: config.gesturePriority,\r\n    disableScroll: config.disableScroll,\r\n  });\r\n\r\n  const pointerDown = (ev: UIEvent): boolean => {\r\n    const timeStamp = now(ev);\r\n    if (hasStartedPan || !hasFiredStart) {\r\n      return false;\r\n    }\r\n\r\n    updateDetail(ev, detail);\r\n    detail.startX = detail.currentX;\r\n    detail.startY = detail.currentY;\r\n    detail.startTime = detail.currentTime = timeStamp;\r\n    detail.velocityX = detail.velocityY = detail.deltaX = detail.deltaY = 0;\r\n    detail.event = ev;\r\n\r\n    // Check if gesture can start\r\n    if (canStart && canStart(detail) === false) {\r\n      return false;\r\n    }\r\n    // Release fallback\r\n    gesture.release();\r\n\r\n    // Start gesture\r\n    if (!gesture.start()) {\r\n      return false;\r\n    }\r\n\r\n    hasStartedPan = true;\r\n    if (threshold === 0) {\r\n      return tryToCapturePan();\r\n    }\r\n    pan.start(detail.startX, detail.startY);\r\n    return true;\r\n  };\r\n\r\n  const pointerMove = (ev: UIEvent) => {\r\n    // fast path, if gesture is currently captured\r\n    // do minimum job to get user-land even dispatched\r\n    if (hasCapturedPan) {\r\n      if (!isMoveQueued && hasFiredStart) {\r\n        isMoveQueued = true;\r\n        calcGestureData(detail, ev);\r\n        requestAnimationFrame(fireOnMove);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // gesture is currently being detected\r\n    calcGestureData(detail, ev);\r\n    if (pan.detect(detail.currentX, detail.currentY)) {\r\n      if (!pan.isGesture() || !tryToCapturePan()) {\r\n        abortGesture();\r\n      }\r\n    }\r\n  };\r\n\r\n  const fireOnMove = () => {\r\n    // Since fireOnMove is called inside a RAF, onEnd() might be called,\r\n    // we must double check hasCapturedPan\r\n    if (!hasCapturedPan) {\r\n      return;\r\n    }\r\n    isMoveQueued = false;\r\n    if (onMove) {\r\n      onMove(detail);\r\n    }\r\n  };\r\n\r\n  const tryToCapturePan = (): boolean => {\r\n    if (gesture && !gesture.capture()) {\r\n      return false;\r\n    }\r\n    hasCapturedPan = true;\r\n    hasFiredStart = false;\r\n\r\n    // reset start position since the real user-land event starts here\r\n    // If the pan detector threshold is big, not resetting the start position\r\n    // will cause a jump in the animation equal to the detector threshold.\r\n    // the array of positions used to calculate the gesture velocity does not\r\n    // need to be cleaned, more points in the positions array always results in a\r\n    // more accurate value of the velocity.\r\n    detail.startX = detail.currentX;\r\n    detail.startY = detail.currentY;\r\n    detail.startTime = detail.currentTime;\r\n\r\n    if (onWillStart) {\r\n      onWillStart(detail).then(fireOnStart);\r\n    } else {\r\n      fireOnStart();\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const blurActiveElement = () => {\r\n    /* tslint:disable-next-line */\r\n    if (typeof document !== 'undefined') {\r\n      const activeElement = document.activeElement as HTMLElement | null;\r\n      if (activeElement !== null && activeElement.blur) {\r\n        activeElement.blur();\r\n      }\r\n    }\r\n  };\r\n\r\n  const fireOnStart = () => {\r\n    if (blurOnStart) {\r\n      blurActiveElement();\r\n    }\r\n    if (onStart) {\r\n      onStart(detail);\r\n    }\r\n    hasFiredStart = true;\r\n  };\r\n\r\n  const reset = () => {\r\n    hasCapturedPan = false;\r\n    hasStartedPan = false;\r\n    isMoveQueued = false;\r\n    hasFiredStart = true;\r\n\r\n    gesture.release();\r\n  };\r\n\r\n  // END *************************\r\n\r\n  const pointerUp = (ev: UIEvent | undefined) => {\r\n    const tmpHasCaptured = hasCapturedPan;\r\n    const tmpHasFiredStart = hasFiredStart;\r\n    reset();\r\n\r\n    if (!tmpHasFiredStart) {\r\n      return;\r\n    }\r\n    calcGestureData(detail, ev);\r\n\r\n    // Try to capture press\r\n    if (tmpHasCaptured) {\r\n      if (onEnd) {\r\n        onEnd(detail);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Not captured any event\r\n    if (notCaptured) {\r\n      notCaptured(detail);\r\n    }\r\n  };\r\n\r\n  const pointerEvents = createPointerEvents(\r\n    finalConfig.el,\r\n    pointerDown,\r\n    pointerMove,\r\n    pointerUp,\r\n    {\r\n      capture: false,\r\n      passive,\r\n    },\r\n  );\r\n\r\n  const abortGesture = () => {\r\n    reset();\r\n    pointerEvents.stop();\r\n    if (notCaptured) {\r\n      notCaptured(detail);\r\n    }\r\n  };\r\n\r\n  return {\r\n    enable(enable = true) {\r\n      if (!enable) {\r\n        if (hasCapturedPan) {\r\n          pointerUp(undefined);\r\n        }\r\n\r\n        reset();\r\n      }\r\n      pointerEvents.enable(enable);\r\n    },\r\n    destroy() {\r\n      gesture.destroy();\r\n      pointerEvents.destroy();\r\n    },\r\n  };\r\n};\r\n\r\nconst calcGestureData = (detail: GestureDetail, ev: UIEvent | undefined) => {\r\n  if (!ev) {\r\n    return;\r\n  }\r\n  const prevX = detail.currentX;\r\n  const prevY = detail.currentY;\r\n  const prevT = detail.currentTime;\r\n\r\n  updateDetail(ev, detail);\r\n\r\n  const currentX = detail.currentX;\r\n  const currentY = detail.currentY;\r\n  const timestamp = (detail.currentTime = now(ev));\r\n  const timeDelta = timestamp - prevT;\r\n  if (timeDelta > 0 && timeDelta < 100) {\r\n    const velocityX = (currentX - prevX) / timeDelta;\r\n    const velocityY = (currentY - prevY) / timeDelta;\r\n    detail.velocityX = velocityX * 0.7 + detail.velocityX * 0.3;\r\n    detail.velocityY = velocityY * 0.7 + detail.velocityY * 0.3;\r\n  }\r\n  detail.deltaX = currentX - detail.startX;\r\n  detail.deltaY = currentY - detail.startY;\r\n  detail.event = ev;\r\n};\r\n\r\nconst updateDetail = (ev: any, detail: GestureDetail) => {\r\n  // get X coordinates for either a mouse click\r\n  // or a touch depending on the given event\r\n  let x = 0;\r\n  let y = 0;\r\n  if (ev) {\r\n    const changedTouches = ev.changedTouches;\r\n    if (changedTouches && changedTouches.length > 0) {\r\n      const touch = changedTouches[0];\r\n      x = touch.clientX;\r\n      y = touch.clientY;\r\n    } else if (ev.pageX !== undefined) {\r\n      x = ev.pageX;\r\n      y = ev.pageY;\r\n    }\r\n  }\r\n  detail.currentX = x;\r\n  detail.currentY = y;\r\n};\r\n\r\nconst now = (ev: UIEvent) => {\r\n  return ev.timeStamp || Date.now();\r\n};\r\n\r\nexport interface GestureDetail {\r\n  type: string;\r\n  startX: number;\r\n  startY: number;\r\n  startTime: number;\r\n  currentX: number;\r\n  currentY: number;\r\n  velocityX: number;\r\n  velocityY: number;\r\n  deltaX: number;\r\n  deltaY: number;\r\n  currentTime: number;\r\n  event: UIEvent;\r\n  data?: any;\r\n}\r\n\r\nexport type GestureCallback = (detail: GestureDetail) => boolean | void;\r\n\r\nexport interface Gesture {\r\n  enable(enable?: boolean): void;\r\n  destroy(): void;\r\n}\r\n\r\nexport interface GestureConfig {\r\n  el: Node;\r\n  disableScroll?: boolean;\r\n\r\n  direction?: 'x' | 'y';\r\n  gestureName: string;\r\n  gesturePriority?: number;\r\n  passive?: boolean;\r\n  maxAngle?: number;\r\n  threshold?: number;\r\n  blurOnStart?: boolean;\r\n\r\n  canStart?: GestureCallback;\r\n  onWillStart?: (_: GestureDetail) => Promise<void>;\r\n  onStart?: GestureCallback;\r\n  onMove?: GestureCallback;\r\n  onEnd?: GestureCallback;\r\n  notCaptured?: GestureCallback;\r\n}\r\n\r\nexport { GESTURE_CONTROLLER };\r\n",":host {\r\n  display: block;\r\n  background: var(--tp-color-neutral-1);\r\n  color: var(--tp-color-neutral-10);\r\n}\r\n\r\n.tp-calendar {\r\n  &__header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding-bottom: 24px;\r\n    background-color: transparent;\r\n  }\r\n\r\n  &__header-left {\r\n    display: flex;\r\n    align-items: center;\r\n    text-align: center;\r\n    width: 210px;\r\n  }\r\n\r\n  &__label {\r\n    flex: 1;\r\n  }\r\n\r\n  &__header-right {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  &__icon {\r\n    color: var(--tp-color-neutral-8);\r\n  }\r\n\r\n  &__content-header {\r\n    display: grid;\r\n    grid-template-columns: repeat(7, 1fr);\r\n    text-align: center;\r\n  }\r\n\r\n  &__week-day {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 24px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  &__container {\r\n    display: grid;\r\n    grid-template-columns: repeat(7, 1fr);\r\n    height: 100%;\r\n  }\r\n}\r\n\r\n//\r\n// color\r\n//\r\n:host(.tp-color) {\r\n  ::slotted(tp-calendar-day) {\r\n    --tp-active-color: var(--tp-color-contrast);\r\n    --tp-active-background: var(--tp-color-base);\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Event,\r\n  EventEmitter,\r\n  h,\r\n  Host,\r\n  Prop,\r\n  State,\r\n} from '@stencil/core';\r\nimport { createColorClasses } from '../../../utils/functions/color.function';\r\nimport { TpColor } from '../../../utils/types/color.type';\r\nimport { TP_CALENDAR } from './utils/calendar.constant';\r\nimport {\r\n  TpCalendarChangeDirection,\r\n  TpCalendarTimeframe,\r\n} from './utils/calendar.type';\r\nimport { createGesture } from './utils/gesture';\r\nimport { Gesture, GestureConfig } from './utils/gesture/index';\r\n\r\n@Component({\r\n  tag: 'tp-calendar',\r\n  styleUrl: 'calendar.scss',\r\n  assetsDirs: ['assets'],\r\n  scoped: true,\r\n})\r\nexport class TpCalendar {\r\n  /**\r\n   * Define a variação de cor do componente.\r\n   */\r\n  @Prop({ reflect: true }) color: TpColor;\r\n\r\n  /**\r\n   * Define a etiqueta do conteúdo sendo exibido.\r\n   */\r\n  @Prop({ reflect: true }) label: string;\r\n\r\n  /**\r\n   * Define o valor inicial do intervalo de tempo que representa\r\n   * o conteúdo sendo exibido.\r\n   */\r\n  @Prop({ reflect: true }) initialTimeframe: TpCalendarTimeframe =\r\n    TP_CALENDAR.timeframes.week;\r\n\r\n  /**\r\n   * Define o valor atual do intervalo de tempo que representa\r\n   * o conteúdo sendo exibido.\r\n   */\r\n  @State() timeframe: TpCalendarTimeframe;\r\n\r\n  /**\r\n   * Evento emitido quando o conteúdo deve avançar ou retroceder\r\n   * por requisição do usuário\r\n   */\r\n  @Event() tpCalendarChange: EventEmitter;\r\n\r\n  /**\r\n   * Evento emitido quando o intervalo de tempo exibido deve mudar\r\n   * por requisição do usuário\r\n   */\r\n  @Event() tpTimeframeToggle: EventEmitter;\r\n\r\n  /**\r\n   * Objeto que representa as configurações de gestos (eventos customizados).\r\n   */\r\n  gesture: Gesture;\r\n\r\n  /**\r\n   * O container do conteúdo sendo exibido.\r\n   */\r\n  container: HTMLDivElement;\r\n\r\n  /**\r\n   * Métodos internos\r\n   */\r\n  onTimeframeToggle() {\r\n    const currentTimeframe = this.timeframe ?? this.initialTimeframe;\r\n    this.timeframe =\r\n      currentTimeframe === TP_CALENDAR.timeframes.week\r\n        ? TP_CALENDAR.timeframes.month\r\n        : TP_CALENDAR.timeframes.week;\r\n    this.tpTimeframeToggle.emit(this.timeframe);\r\n  }\r\n\r\n  onCalendarChange(direction: TpCalendarChangeDirection) {\r\n    this.tpCalendarChange.emit(direction);\r\n  }\r\n\r\n  setupGesture() {\r\n    let direction: TpCalendarChangeDirection;\r\n\r\n    const options: GestureConfig = {\r\n      el: this.container,\r\n      gestureName: 'swipe',\r\n      onStart: () => {},\r\n      onMove: (event) => {\r\n        if (event.deltaX > 0) {\r\n          direction = TP_CALENDAR.directions.left;\r\n        } else {\r\n          direction = TP_CALENDAR.directions.right;\r\n        }\r\n      },\r\n      onEnd: () => {\r\n        this.tpCalendarChange.emit(direction);\r\n      },\r\n    };\r\n\r\n    this.gesture = createGesture(options);\r\n    this.gesture.enable();\r\n  }\r\n\r\n  disconnectGesture() {\r\n    if (this.gesture) {\r\n      this.gesture.destroy();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Lifecycle hooks.\r\n   */\r\n  componentDidLoad() {\r\n    this.setupGesture();\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.disconnectGesture();\r\n  }\r\n\r\n  render() {\r\n    const { color, label, initialTimeframe, timeframe } = this;\r\n\r\n    return (\r\n      <Host\r\n        class={createColorClasses(color, {\r\n          'tp-calendar': true,\r\n        })}\r\n      >\r\n        <div class=\"tp-calendar__header\">\r\n          <div class=\"tp-calendar__header-left\">\r\n            <ion-button\r\n              // @ts-ignore\r\n              size=\"xxs\"\r\n              fill=\"clear\"\r\n              onClick={() => this.onCalendarChange(TP_CALENDAR.directions.left)}\r\n            >\r\n              <ion-icon\r\n                slot=\"icon-only\"\r\n                src={TP_CALENDAR.icons.chevronLeft}\r\n              ></ion-icon>\r\n            </ion-button>\r\n\r\n            <ion-text class=\"tp-calendar__label\" tp-type=\"p16b\">\r\n              {label}\r\n            </ion-text>\r\n\r\n            <ion-button\r\n              // @ts-ignore\r\n              size=\"xxs\"\r\n              fill=\"clear\"\r\n              onClick={() =>\r\n                this.onCalendarChange(TP_CALENDAR.directions.right)\r\n              }\r\n            >\r\n              <ion-icon\r\n                slot=\"icon-only\"\r\n                src={TP_CALENDAR.icons.chevronRight}\r\n              ></ion-icon>\r\n            </ion-button>\r\n          </div>\r\n\r\n          <div class=\"tp-calendar__header-right\">\r\n            <ion-button\r\n              // @ts-ignore\r\n              size=\"xxs\"\r\n              fill=\"clear\"\r\n              onClick={() => this.onTimeframeToggle()}\r\n            >\r\n              {timeframe ?? initialTimeframe}\r\n\r\n              <ion-icon\r\n                class=\"tp-calendar__icon\"\r\n                slot=\"end\"\r\n                src={TP_CALENDAR.icons.chevronDown}\r\n              ></ion-icon>\r\n            </ion-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"tp-calendar__content\">\r\n          <div class=\"tp-calendar__content-header\">\r\n            {TP_CALENDAR.weekdays.map((day) => (\r\n              <div class=\"tp-calendar__week-day\">\r\n                <ion-text tp-type=\"p12\" color=\"neutral-8\">\r\n                  {day}\r\n                </ion-text>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div\r\n            class=\"tp-calendar__container\"\r\n            ref={(el) => (this.container = el)}\r\n          >\r\n            <slot></slot>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}