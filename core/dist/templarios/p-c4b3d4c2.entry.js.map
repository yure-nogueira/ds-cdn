{"version":3,"names":["chartRadialCss","TpChartRadialStyle0","TpChartRadial","updateTrackColors","progresses","this","host","shadowRoot","querySelectorAll","forEach","progress","itemIndex","Number","dataset","item","items","style","stroke","color","componentDidLoad","render","size","progressesData","total","singles","quantity","push","reversedItems","slice","reverse","h","Host","key","class","createColorClasses","Boolean","viewBox","cx","cy","r","map","index","originalIndex","length","progressPercentage","ignore","name"],"sources":["src/components/core/chart-radial/chart-radial.scss?tag=tp-chart-radial&encapsulation=shadow","src/components/core/chart-radial/chart-radial.tsx"],"sourcesContent":["@use 'sass:map';\r\n\r\n/**\r\n  * @prop --tp-progress-percentage: Propriedade definida dinamicamente no tsx. Define o progresso de um barra circular.\r\n  * @prop --tp-size: Define o tamanho do componente.\r\n  * @prop --tp-title-font-size: Define o font-size do título do componente.\r\n  * @prop --tp-title-line-height: Define o line-height do título do componente.\r\n  * @prop --tp-subtitle-font-size: Define o font-size do subtítulo do componente.\r\n  * @prop --tp-subtitle-line-height: Define o line-height do subtítulo do componente.\r\n*/\r\n\r\n$tp-chart-radial-sizes: (\r\n  xs: (\r\n    properties: (\r\n      tp-size: 48px,\r\n      tp-title-font-size: 12px,\r\n      tp-title-line-height: 12px,\r\n    ),\r\n    rules: (\r\n      display: none,\r\n    ),\r\n  ),\r\n  sm: (\r\n    properties: (\r\n      tp-size: 56px,\r\n      tp-title-font-size: 14px,\r\n      tp-title-line-height: 16px,\r\n    ),\r\n    rules: (\r\n      display: none,\r\n    ),\r\n  ),\r\n  md: (\r\n    properties: (\r\n      tp-size: 80px,\r\n      tp-title-font-size: 16px,\r\n      tp-title-line-height: 16px,\r\n      tp-subtitle-font-size: 10px,\r\n      tp-subtitle-line-height: 12px,\r\n    ),\r\n    rules: (\r\n      display: initial,\r\n    ),\r\n  ),\r\n  lg: (\r\n    properties: (\r\n      tp-size: 108px,\r\n      tp-title-font-size: 20px,\r\n      tp-title-line-height: 20px,\r\n      tp-subtitle-font-size: 12px,\r\n      tp-subtitle-line-height: 12px,\r\n    ),\r\n    rules: (\r\n      display: initial,\r\n    ),\r\n  ),\r\n);\r\n\r\n:host {\r\n  position: relative;\r\n  display: flex;\r\n  width: var(--tp-size, 56px);\r\n  height: var(--tp-size, 56px);\r\n}\r\n\r\n.tp-chart-radial {\r\n  &__container {\r\n    width: var(--tp-size, 56px);\r\n    height: var(--tp-size, 56px);\r\n  }\r\n\r\n  &__track,\r\n  &__progress {\r\n    transform: rotate(-90deg);\r\n    transform-origin: 18px 18px;\r\n    transition: 1s ease-in-out;\r\n    fill: none;\r\n    stroke-dashoffset: 0;\r\n    stroke-width: 2;\r\n    stroke-linecap: round;\r\n    stroke-linejoin: round;\r\n  }\r\n\r\n  &__track {\r\n    stroke: var(--tp-color-neutral-2);\r\n  }\r\n\r\n  &__progress {\r\n    stroke-dasharray: var(--tp-progress-percentage) 100;\r\n  }\r\n\r\n  &__text-container {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    text-align: center;\r\n    transform: translate(-50%, -50%);\r\n\r\n    ::slotted(ion-label[slot='title']) {\r\n      font-weight: 600 !important;\r\n      font-size: 14px !important;\r\n      line-height: 16px !important;\r\n    }\r\n\r\n    ::slotted(ion-label[slot='subtitle']) {\r\n      display: none;\r\n      font-weight: 400 !important;\r\n    }\r\n  }\r\n}\r\n\r\n//\r\n// color\r\n//\r\n:host(.tp-color) .tp-chart-radial__track {\r\n  stroke: var(--tp-color-base);\r\n}\r\n\r\n//\r\n// size\r\n//\r\n@each $size-name, $size-value in $tp-chart-radial-sizes {\r\n  $properties-map: map.get($size-value, properties);\r\n  $rules-map: map.get($size-value, rules);\r\n\r\n  :host(.tp-chart-radial--#{$size-name}) {\r\n    @if ($properties-map) {\r\n      @each $properties-name, $properties-value in $properties-map {\r\n        --#{$properties-name}: #{$properties-value};\r\n      }\r\n    }\r\n  }\r\n\r\n  :host(.tp-chart-radial--#{$size-name}) .tp-chart-radial__text-container {\r\n    ::slotted(ion-label[slot='title']) {\r\n      font-size: var(--tp-title-font-size) !important;\r\n      line-height: var(--tp-title-line-height) !important;\r\n    }\r\n\r\n    ::slotted(ion-label[slot='subtitle']) {\r\n      font-size: var(--tp-subtitle-font-size) !important;\r\n      line-height: var(--tp-subtitle-line-height) !important;\r\n\r\n      @if ($rules-map) {\r\n        @each $rules-name, $rules-value in $rules-map {\r\n          #{$rules-name}: #{$rules-value};\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Component, Element, Host, Prop, Watch, h } from '@stencil/core';\r\nimport { createColorClasses } from '../../../utils/functions/color.function';\r\nimport type { TpColor } from '../../../utils/types/color.type';\r\nimport { TpChartRadialSize } from './utils/chart-radial.enum';\r\nimport { TpChartRadialItem } from './utils/chart-radial.type';\r\n\r\n@Component({\r\n  tag: 'tp-chart-radial',\r\n  styleUrl: 'chart-radial.scss',\r\n  assetsDirs: ['assets'],\r\n  shadow: true,\r\n})\r\nexport class TpChartRadial {\r\n  @Element() host: HTMLElement;\r\n\r\n  /**\r\n   * Define a variação de cor do componente.\r\n   */\r\n  @Prop({ reflect: true }) color?: TpColor;\r\n\r\n  /**\r\n   * Define o tamanho do componente.\r\n   */\r\n  @Prop({ reflect: true }) size?: TpChartRadialSize;\r\n\r\n  /**\r\n   * Define os valores representados pelo componente.\r\n   */\r\n  @Prop({ reflect: true }) items: TpChartRadialItem[] = [];\r\n\r\n  @Watch('items')\r\n  updateTrackColors() {\r\n    const progresses = this.host.shadowRoot.querySelectorAll<HTMLElement>(\r\n      '.tp-chart-radial__progress',\r\n    );\r\n\r\n    progresses.forEach((progress) => {\r\n      const itemIndex = Number(progress.dataset['index']);\r\n      const item = this.items[itemIndex];\r\n      progress.style.stroke = `var(--tp-color-${item.color})`;\r\n    });\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.updateTrackColors();\r\n  }\r\n\r\n  render() {\r\n    const { color, size, items } = this;\r\n\r\n    const progressesData = {\r\n      total: 0,\r\n      singles: [] as number[],\r\n    };\r\n\r\n    items.forEach((item: TpChartRadialItem) => {\r\n      progressesData.total += item.quantity;\r\n      progressesData.singles.push(progressesData.total);\r\n    });\r\n\r\n    const reversedItems = items.slice(0).reverse();\r\n\r\n    return (\r\n      <Host\r\n        class={createColorClasses(color, {\r\n          'tp-chart-radial': true,\r\n          [`tp-chart-radial--${size}`]: Boolean(size),\r\n        })}\r\n      >\r\n        <svg class=\"tp-chart-radial__container\" viewBox=\"0 0 36 36\">\r\n          <circle class=\"tp-chart-radial__track\" cx=\"18\" cy=\"18\" r=\"16\" />\r\n          {reversedItems.map((item: TpChartRadialItem, index: number) => {\r\n            const originalIndex = items.length - index - 1;\r\n            const progressPercentage =\r\n              (progressesData.singles[originalIndex] / progressesData.total) *\r\n              100;\r\n\r\n            if (!item.ignore && item.quantity) {\r\n              return (\r\n                <circle\r\n                  cx=\"18\"\r\n                  cy=\"18\"\r\n                  r=\"16\"\r\n                  data-index={originalIndex}\r\n                  class=\"tp-chart-radial__progress\"\r\n                  style={{\r\n                    '--tp-progress-percentage': `${progressPercentage}`,\r\n                  }}\r\n                />\r\n              );\r\n            }\r\n          })}\r\n        </svg>\r\n\r\n        <div class=\"tp-chart-radial__text-container\">\r\n          <slot name=\"title\"></slot>\r\n          <slot name=\"subtitle\"></slot>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"wFAAA,MAAMA,EAAiB,soGACvB,MAAAC,EAAeD,E,MCWFE,EAAa,M,6EAgB8B,E,CAGtD,iBAAAC,GACE,MAAMC,EAAaC,KAAKC,KAAKC,WAAWC,iBACtC,8BAGFJ,EAAWK,SAASC,IAClB,MAAMC,EAAYC,OAAOF,EAASG,QAAQ,UAC1C,MAAMC,EAAOT,KAAKU,MAAMJ,GACxBD,EAASM,MAAMC,OAAS,kBAAkBH,EAAKI,QAAQ,G,CAI3D,gBAAAC,GACEd,KAAKF,mB,CAGP,MAAAiB,GACE,MAAMF,MAAEA,EAAKG,KAAEA,EAAIN,MAAEA,GAAUV,KAE/B,MAAMiB,EAAiB,CACrBC,MAAO,EACPC,QAAS,IAGXT,EAAMN,SAASK,IACbQ,EAAeC,OAAST,EAAKW,SAC7BH,EAAeE,QAAQE,KAAKJ,EAAeC,MAAM,IAGnD,MAAMI,EAAgBZ,EAAMa,MAAM,GAAGC,UAErC,OACEC,EAACC,EAAI,CAAAC,IAAA,2CACHC,MAAOC,EAAmBhB,EAAO,CAC/B,kBAAmB,KACnB,CAAC,oBAAoBG,KAASc,QAAQd,MAGxCS,EAAA,OAAAE,IAAA,2CAAKC,MAAM,6BAA6BG,QAAQ,aAC9CN,EAAA,UAAAE,IAAA,2CAAQC,MAAM,yBAAyBI,GAAG,KAAKC,GAAG,KAAKC,EAAE,OACxDZ,EAAca,KAAI,CAAC1B,EAAyB2B,KAC3C,MAAMC,EAAgB3B,EAAM4B,OAASF,EAAQ,EAC7C,MAAMG,EACHtB,EAAeE,QAAQkB,GAAiBpB,EAAeC,MACxD,IAEF,IAAKT,EAAK+B,QAAU/B,EAAKW,SAAU,CACjC,OACEK,EAAA,UACEO,GAAG,KACHC,GAAG,KACHC,EAAE,KAAI,aACMG,EACZT,MAAM,4BACNjB,MAAO,CACL,2BAA4B,GAAG4B,M,MAQ3Cd,EAAA,OAAAE,IAAA,2CAAKC,MAAM,mCACTH,EAAA,QAAAE,IAAA,2CAAMc,KAAK,UACXhB,EAAA,QAAAE,IAAA,2CAAMc,KAAK,c"}