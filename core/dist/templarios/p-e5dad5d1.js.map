{"version":3,"names":["ORDERBY","DATE","PRICE","PRICE_ASC","POPULARITY","RATING","TITLE","API_CART_ACTIONS","addToCart","getCart","updateCart","removeFromCart","API_PRODUCT_ACTIONS","getCategories","ApiProduct","getFeaturedProducts","rawResponse","fetch","process","env","WOOPROXY_BASE_URL","parsedResponse","json","data","totalPages","products","camelcaseKeys","deep","getOrderedProducts","params","orderby","order","page","category","query","URLSearchParams","getSearchedProducts","searchTerm","optionalParams","Object","assign","ok","Error","getProductById","id","product","AJAX_URL","method","headers","body","action","categories","currency","value","locale","currencyPtBr","Number","toFixed","replace"],"sources":["src/utils/api/ecommerce/utils/constants/requests.constant.ts","src/utils/api/ecommerce/product.api.ts","src/utils/filters/currency.filter.ts"],"sourcesContent":["export const ORDERBY = {\r\n  DATE: 'date',\r\n  PRICE: 'price',\r\n  PRICE_ASC: 'price-asc',\r\n  POPULARITY: 'popularity',\r\n  RATING: 'rating',\r\n  TITLE: 'title',\r\n};\r\n\r\nexport const API_CART_ACTIONS = {\r\n  addToCart: 'tp_add_to_cart',\r\n  getCart: 'tp_get_cart',\r\n  updateCart: 'tp_update_cart',\r\n  removeFromCart: 'tp_remove_from_cart',\r\n};\r\n\r\nexport const API_PRODUCT_ACTIONS = {\r\n  getCategories: 'tp_get_categories',\r\n};\r\n","import camelcaseKeys from 'camelcase-keys';\r\nimport { OrderedParams } from './utils/interfaces/requests.interface';\r\nimport { ApiResponse } from './utils/interfaces/responses.interface';\r\nimport {\r\n  Product,\r\n  ProductCategoryWithUrl,\r\n} from './utils/interfaces/product.interface';\r\nimport { API_PRODUCT_ACTIONS } from './utils/constants/requests.constant';\r\n\r\nexport class ApiProduct {\r\n  static async getFeaturedProducts() {\r\n    const rawResponse = await fetch(\r\n      `${process.env.WOOPROXY_BASE_URL}/products/featured`,\r\n    );\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data, totalPages } = parsedResponse;\r\n    const products: Product[] = camelcaseKeys(data, { deep: true });\r\n    return {\r\n      products,\r\n      totalPages,\r\n    };\r\n  }\r\n\r\n  static async getOrderedProducts(params: OrderedParams = {}) {\r\n    const { orderby, order, page, category } = params;\r\n\r\n    const query = new URLSearchParams({\r\n      order: order ?? 'desc',\r\n      page: page ? `${page}` : '1',\r\n      category: category ? `${category}` : '',\r\n    });\r\n\r\n    const rawResponse = await fetch(\r\n      `${process.env.WOOPROXY_BASE_URL}/products/ordered/${orderby ?? 'date'}?${query}`,\r\n    );\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data, totalPages } = parsedResponse;\r\n    const products: Product[] = camelcaseKeys(data, { deep: true });\r\n    return {\r\n      products,\r\n      totalPages,\r\n    };\r\n  }\r\n\r\n  static async getSearchedProducts(\r\n    searchTerm: string,\r\n    optionalParams: any = {},\r\n  ) {\r\n    const rawResponse = await fetch(\r\n      `${process.env.WOOPROXY_BASE_URL}/products/search/${searchTerm}`,\r\n      { ...optionalParams },\r\n    );\r\n\r\n    if (!rawResponse.ok) {\r\n      throw new Error();\r\n    }\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data, totalPages } = parsedResponse;\r\n    const products: Product[] = camelcaseKeys(data, { deep: true });\r\n    return {\r\n      products,\r\n      totalPages,\r\n    };\r\n  }\r\n\r\n  static async getProductById(id: number) {\r\n    const rawResponse = await fetch(\r\n      `${process.env.WOOPROXY_BASE_URL}/products/${id}`,\r\n    );\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data } = parsedResponse;\r\n    const product: Product = camelcaseKeys(data, { deep: true });\r\n    return product;\r\n  }\r\n\r\n  static async getCategories() {\r\n    const rawResponse = await fetch(`${process.env.AJAX_URL}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: new URLSearchParams(\r\n        Object.assign({ action: API_PRODUCT_ACTIONS.getCategories }),\r\n      ),\r\n    });\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data } = parsedResponse;\r\n    const categories: ProductCategoryWithUrl[] = camelcaseKeys(data, {\r\n      deep: true,\r\n    });\r\n    return categories;\r\n  }\r\n}\r\n","type Locale = 'pt-br';\r\n\r\nexport function currency(value: string | number, locale: Locale) {\r\n  switch (locale) {\r\n    case 'pt-br':\r\n      return currencyPtBr(value);\r\n    default:\r\n      return value;\r\n  }\r\n}\r\n\r\nfunction currencyPtBr(value: string | number) {\r\n  if (typeof value === 'string') {\r\n    return `R$ ${Number(value).toFixed(2).replace('.', ',')}`;\r\n  }\r\n\r\n  if (typeof value === 'number') {\r\n    return `R$ ${value.toFixed(2).replace('.', ',')}`;\r\n  }\r\n}\r\n"],"mappings":"0CAAaA,EAAU,CACrBC,KAAM,OACNC,MAAO,QACPC,UAAW,YACXC,WAAY,aACZC,OAAQ,SACRC,MAAO,S,MAGIC,EAAmB,CAC9BC,UAAW,iBACXC,QAAS,cACTC,WAAY,iBACZC,eAAgB,uBAGX,MAAMC,EAAsB,CACjCC,cAAe,qB,MCRJC,EACX,gCAAaC,GACX,MAAMC,QAAoBC,MACxB,GAAGC,QAAQC,IAAIC,uCAGjB,MAAMC,QAAoCL,EAAYM,OACtD,MAAMC,KAAEA,EAAIC,WAAEA,GAAeH,EAC7B,MAAMI,EAAsBC,EAAcH,EAAM,CAAEI,KAAM,OACxD,MAAO,CACLF,WACAD,a,CAIJ,+BAAaI,CAAmBC,EAAwB,IACtD,MAAMC,QAAEA,EAAOC,MAAEA,EAAKC,KAAEA,EAAIC,SAAEA,GAAaJ,EAE3C,MAAMK,EAAQ,IAAIC,gBAAgB,CAChCJ,MAAOA,IAAK,MAALA,SAAK,EAALA,EAAS,OAChBC,KAAMA,EAAO,GAAGA,IAAS,IACzBC,SAAUA,EAAW,GAAGA,IAAa,KAGvC,MAAMjB,QAAoBC,MACxB,GAAGC,QAAQC,IAAIC,sCAAsCU,IAAO,MAAPA,SAAO,EAAPA,EAAW,UAAUI,KAG5E,MAAMb,QAAoCL,EAAYM,OACtD,MAAMC,KAAEA,EAAIC,WAAEA,GAAeH,EAC7B,MAAMI,EAAsBC,EAAcH,EAAM,CAAEI,KAAM,OACxD,MAAO,CACLF,WACAD,a,CAIJ,gCAAaY,CACXC,EACAC,EAAsB,IAEtB,MAAMtB,QAAoBC,MACxB,GAAGC,QAAQC,IAAIC,qCAAqCiB,IAAYE,OAAAC,OAAA,GAC3DF,IAGP,IAAKtB,EAAYyB,GAAI,CACnB,MAAM,IAAIC,K,CAGZ,MAAMrB,QAAoCL,EAAYM,OACtD,MAAMC,KAAEA,EAAIC,WAAEA,GAAeH,EAC7B,MAAMI,EAAsBC,EAAcH,EAAM,CAAEI,KAAM,OACxD,MAAO,CACLF,WACAD,a,CAIJ,2BAAamB,CAAeC,GAC1B,MAAM5B,QAAoBC,MACxB,GAAGC,QAAQC,IAAIC,8BAA8BwB,KAG/C,MAAMvB,QAAoCL,EAAYM,OACtD,MAAMC,KAAEA,GAASF,EACjB,MAAMwB,EAAmBnB,EAAcH,EAAM,CAAEI,KAAM,OACrD,OAAOkB,C,CAGT,0BAAahC,GACX,MAAMG,QAAoBC,MAAM,GAAGC,QAAQC,IAAI2B,WAAY,CACzDC,OAAQ,OACRC,QAAS,CACP,eAAgB,qCAElBC,KAAM,IAAId,gBACRI,OAAOC,OAAO,CAAEU,OAAQtC,EAAoBC,mBAIhD,MAAMQ,QAAoCL,EAAYM,OACtD,MAAMC,KAAEA,GAASF,EACjB,MAAM8B,EAAuCzB,EAAcH,EAAM,CAC/DI,KAAM,OAER,OAAOwB,C,WC7FKC,EAASC,EAAwBC,GAC/C,OAAQA,GACN,IAAK,QACH,OAAOC,EAAaF,GACtB,QACE,OAAOA,EAEb,CAEA,SAASE,EAAaF,GACpB,UAAWA,IAAU,SAAU,CAC7B,MAAO,MAAMG,OAAOH,GAAOI,QAAQ,GAAGC,QAAQ,IAAK,M,CAGrD,UAAWL,IAAU,SAAU,CAC7B,MAAO,MAAMA,EAAMI,QAAQ,GAAGC,QAAQ,IAAK,M,CAE/C,Q"}