{"version":3,"file":"input-container.js","sourceRoot":"","sources":["../../../../src/components/core/input-container/input-container.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  Element,\r\n  Host,\r\n  Listen,\r\n  Prop,\r\n  State,\r\n  h,\r\n} from '@stencil/core';\r\nimport { createColorClasses } from '../../../utils/functions/color.function';\r\nimport type { TpColor } from '../../../utils/types/color.type';\r\nimport { TP_INPUT_CONTAINER } from './utils/input-container.constants';\r\n\r\n@Component({\r\n  tag: 'tp-input-container',\r\n  styleUrl: 'input-container.scss',\r\n  assetsDirs: ['assets'],\r\n  shadow: true,\r\n})\r\nexport class TpInputContainer {\r\n  /**\r\n   * Quando usado em conjunto com 'select', representa a largura do 'select' definida dinamicamente.\r\n   */\r\n  private hostWidth: number | undefined;\r\n\r\n  /**\r\n   * Referência ao componente no DOM.\r\n   */\r\n  @Element() host!: HTMLElement;\r\n\r\n  /**\r\n   * Alvo do evento de click. Evita bugs nos casos em que há mais de um 'select na mesma página.\r\n   */\r\n  @State() clickTarget!: Node;\r\n\r\n  /**\r\n   * Monitoria se o 'select' foi clicado e está ativo. A propriedade é usada para aplicar estilização e evitar processamentos desnecessários em alguns métodos.\r\n   */\r\n  @State() selectOpen: boolean = false;\r\n\r\n  /**\r\n   * ???\r\n   */\r\n  @State() hasSelect: boolean = false;\r\n\r\n  /**\r\n   * Define a variação de cor do componente.\r\n   */\r\n  @Prop({ reflect: true }) color?: TpColor;\r\n\r\n  /**\r\n   * Define a variação de estado do componente.\r\n   */\r\n  @Prop({ reflect: true }) state?: 'error' | 'success';\r\n\r\n  /**\r\n   * Define a estilização do estado disabled do componente.\r\n   */\r\n  @Prop({ reflect: true }) disabled = false;\r\n\r\n  /**\r\n   * ???\r\n   */\r\n  @Prop({ reflect: true }) inverted = false;\r\n\r\n  /**\r\n   * Define o estado de carregamento do componente.\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) loading?: boolean;\r\n\r\n  @Listen('click', { target: 'body' })\r\n  setClickTarget(e: MouseEvent) {\r\n    if (this.disabled) return;\r\n\r\n    this.clickTarget = e.target as Node;\r\n  }\r\n\r\n  @Listen('click')\r\n  catchSelectIconClick(e: MouseEvent) {\r\n    const target = e.target as Node;\r\n    const ionSelect = this.host.querySelector(\r\n      'ion-select',\r\n    ) as HTMLIonSelectElement;\r\n\r\n    if (!ionSelect) return;\r\n\r\n    const shouldOpenOverlay =\r\n      this.host.contains(target) &&\r\n      ionSelect.hasAttribute('interface') &&\r\n      (target.nodeName === 'ION-ICON' ||\r\n        target.nodeName === 'TP-INPUT-CONTAINER');\r\n\r\n    if (shouldOpenOverlay) {\r\n      ionSelect.open(e);\r\n    }\r\n  }\r\n\r\n  @Listen('resize', { target: 'window' })\r\n  setPopoverWidthOnResize() {\r\n    if (!this.selectOpen) return;\r\n\r\n    const popoverElement = document.querySelector(\r\n      '.select-popover',\r\n    ) as HTMLElement;\r\n\r\n    popoverElement?.style.setProperty('--width', `${this.host.clientWidth}px`);\r\n\r\n    this.setPopoverPosition();\r\n  }\r\n\r\n  @Listen('ionPopoverWillPresent', { target: 'body' })\r\n  setPopoverCharacteristics() {\r\n    if (!this.host.contains(this.clickTarget)) return;\r\n\r\n    this.selectOpen = true;\r\n    this.hostWidth = this.host.clientWidth;\r\n\r\n    const popoverElement = document.querySelector(\r\n      '.select-popover',\r\n    ) as HTMLElement;\r\n    popoverElement?.style.setProperty('--width', `${this.hostWidth}px`);\r\n\r\n    if (popoverElement.classList.contains('popover-bottom')) {\r\n      this.inverted = true;\r\n    }\r\n\r\n    this.setPopoverPosition();\r\n  }\r\n\r\n  @Listen('ionPopoverWillDismiss', { target: 'body' })\r\n  unsetClikedState() {\r\n    this.selectOpen = false;\r\n  }\r\n\r\n  componentDidLoad() {\r\n    const ionSelect = this.host.querySelector(\r\n      'ION-SELECT',\r\n    ) as HTMLIonSelectElement;\r\n\r\n    if (ionSelect) this.hasSelect = true;\r\n  }\r\n\r\n  setPopoverPosition() {\r\n    const popoverElement = document.querySelector(\r\n      '.select-popover',\r\n    ) as HTMLElement;\r\n    const selectElement = this.host.querySelector('ion-select');\r\n    const { top, bottom, left } = selectElement.getBoundingClientRect();\r\n    const fixPositionX = 1;\r\n\r\n    if (this.inverted) {\r\n      popoverElement.classList.add('tp-popover--inverted');\r\n      popoverElement?.style.setProperty(\r\n        '--offset-x',\r\n        `${Math.round(left) - fixPositionX}px`,\r\n      );\r\n      popoverElement?.style.setProperty(\r\n        '--offset-y',\r\n        `${Math.round(window.innerHeight - top)}px`,\r\n      );\r\n    } else {\r\n      popoverElement?.style.setProperty(\r\n        '--offset-x',\r\n        `${Math.round(left) - fixPositionX}px`,\r\n      );\r\n      popoverElement?.style.setProperty(\r\n        '--offset-y',\r\n        `${Math.round(bottom)}px`,\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { color, state, disabled, hasSelect, selectOpen, loading } = this;\r\n    let content;\r\n    let stateContent;\r\n    let selectIconContainer;\r\n\r\n    const icon =\r\n      state === 'error'\r\n        ? TP_INPUT_CONTAINER.icons.alertTriangle\r\n        : TP_INPUT_CONTAINER.icons.check;\r\n\r\n    if (loading) {\r\n      content = (\r\n        <ion-skeleton-text\r\n          class=\"tp-input-container__skeleton\"\r\n          animated\r\n        ></ion-skeleton-text>\r\n      );\r\n    } else {\r\n      if (this.hasSelect) {\r\n        selectIconContainer = (\r\n          <div class=\"tp-input-container__select-container\">\r\n            <ion-icon\r\n              class={{\r\n                'tp-input-container__select-icon': true,\r\n                'tp-input-container__select-icon--open': selectOpen,\r\n              }}\r\n              src={TP_INPUT_CONTAINER.icons.chevronDown}\r\n              aria-hidden=\"true\"\r\n            ></ion-icon>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      if (state) {\r\n        stateContent = (\r\n          <div class=\"tp-input-container__state-container\">\r\n            <ion-icon\r\n              class=\"tp-input-container__icon\"\r\n              src={icon}\r\n              aria-hidden=\"true\"\r\n            ></ion-icon>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      content = (\r\n        <div>\r\n          <slot name=\"label\"></slot>\r\n          <div class=\"tp-input-container__wrapper\">\r\n            <slot name=\"start\"></slot>\r\n            <slot></slot>\r\n            <slot name=\"end\"></slot>\r\n            {selectIconContainer}\r\n            {stateContent}\r\n          </div>\r\n          <slot name=\"feedback-success\"></slot>\r\n          <slot name=\"feedback-error\"></slot>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Host\r\n        class={createColorClasses(color, {\r\n          'tp-input-container': true,\r\n          'tp-input-container--error': state === 'error',\r\n          'tp-input-container--success': state === 'success',\r\n          'tp-input-container--disabled': disabled,\r\n          'tp-input-container--with-select': hasSelect,\r\n          'tp-input-container--select-open': selectOpen,\r\n        })}\r\n      >\r\n        {content}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}