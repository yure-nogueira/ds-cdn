{"version":3,"file":"product.api.js","sourceRoot":"","sources":["../../../../src/utils/api/ecommerce/product.api.ts"],"names":[],"mappings":"AAAA,OAAO,aAAa,MAAM,gBAAgB,CAAC;AAO3C,OAAO,EAAE,mBAAmB,EAAE,MAAM,qCAAqC,CAAC;AAE1E,MAAM,OAAO,UAAU;IACrB,MAAM,CAAC,KAAK,CAAC,mBAAmB;QAC9B,MAAM,WAAW,GAAG,MAAM,KAAK,CAC7B,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,oBAAoB,CACrD,CAAC;QAEF,MAAM,cAAc,GAAgB,MAAM,WAAW,CAAC,IAAI,EAAE,CAAC;QAC7D,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,cAAc,CAAC;QAC5C,MAAM,QAAQ,GAAc,aAAa,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;QAChE,OAAO;YACL,QAAQ;YACR,UAAU;SACX,CAAC;IACJ,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,SAAwB,EAAE;QACxD,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,MAAM,CAAC;QAElD,MAAM,KAAK,GAAG,IAAI,eAAe,CAAC;YAChC,KAAK,EAAE,KAAK,aAAL,KAAK,cAAL,KAAK,GAAI,MAAM;YACtB,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG;YAC5B,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC,EAAE;SACxC,CAAC,CAAC;QAEH,MAAM,WAAW,GAAG,MAAM,KAAK,CAC7B,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,qBAAqB,OAAO,aAAP,OAAO,cAAP,OAAO,GAAI,MAAM,IAAI,KAAK,EAAE,CAClF,CAAC;QAEF,MAAM,cAAc,GAAgB,MAAM,WAAW,CAAC,IAAI,EAAE,CAAC;QAC7D,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,cAAc,CAAC;QAC5C,MAAM,QAAQ,GAAc,aAAa,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;QAChE,OAAO;YACL,QAAQ;YACR,UAAU;SACX,CAAC;IACJ,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,mBAAmB,CAC9B,UAAkB,EAClB,iBAAsB,EAAE;QAExB,MAAM,WAAW,GAAG,MAAM,KAAK,CAC7B,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,oBAAoB,UAAU,EAAE,oBAC3D,cAAc,EACpB,CAAC;QAEF,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC;YACpB,MAAM,IAAI,KAAK,EAAE,CAAC;QACpB,CAAC;QAED,MAAM,cAAc,GAAgB,MAAM,WAAW,CAAC,IAAI,EAAE,CAAC;QAC7D,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,cAAc,CAAC;QAC5C,MAAM,QAAQ,GAAc,aAAa,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;QAChE,OAAO;YACL,QAAQ;YACR,UAAU;SACX,CAAC;IACJ,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,EAAU;QACpC,MAAM,WAAW,GAAG,MAAM,KAAK,CAC7B,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,aAAa,EAAE,EAAE,CAClD,CAAC;QAEF,MAAM,cAAc,GAAgB,MAAM,WAAW,CAAC,IAAI,EAAE,CAAC;QAC7D,MAAM,EAAE,IAAI,EAAE,GAAG,cAAc,CAAC;QAChC,MAAM,OAAO,GAAY,aAAa,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;QAC7D,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,aAAa;QACxB,MAAM,WAAW,GAAG,MAAM,KAAK,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE;YACzD,MAAM,EAAE,MAAM;YACd,OAAO,EAAE;gBACP,cAAc,EAAE,mCAAmC;aACpD;YACD,IAAI,EAAE,IAAI,eAAe,CACvB,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,mBAAmB,CAAC,aAAa,EAAE,CAAC,CAC7D;SACF,CAAC,CAAC;QAEH,MAAM,cAAc,GAAgB,MAAM,WAAW,CAAC,IAAI,EAAE,CAAC;QAC7D,MAAM,EAAE,IAAI,EAAE,GAAG,cAAc,CAAC;QAChC,MAAM,UAAU,GAA6B,aAAa,CAAC,IAAI,EAAE;YAC/D,IAAI,EAAE,IAAI;SACX,CAAC,CAAC;QACH,OAAO,UAAU,CAAC;IACpB,CAAC;CACF","sourcesContent":["import camelcaseKeys from 'camelcase-keys';\r\nimport { OrderedParams } from './utils/interfaces/requests.interface';\r\nimport { ApiResponse } from './utils/interfaces/responses.interface';\r\nimport {\r\n  Product,\r\n  ProductCategoryWithUrl,\r\n} from './utils/interfaces/product.interface';\r\nimport { API_PRODUCT_ACTIONS } from './utils/constants/requests.constant';\r\n\r\nexport class ApiProduct {\r\n  static async getFeaturedProducts() {\r\n    const rawResponse = await fetch(\r\n      `${process.env.WOOPROXY_BASE_URL}/products/featured`,\r\n    );\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data, totalPages } = parsedResponse;\r\n    const products: Product[] = camelcaseKeys(data, { deep: true });\r\n    return {\r\n      products,\r\n      totalPages,\r\n    };\r\n  }\r\n\r\n  static async getOrderedProducts(params: OrderedParams = {}) {\r\n    const { orderby, order, page, category } = params;\r\n\r\n    const query = new URLSearchParams({\r\n      order: order ?? 'desc',\r\n      page: page ? `${page}` : '1',\r\n      category: category ? `${category}` : '',\r\n    });\r\n\r\n    const rawResponse = await fetch(\r\n      `${process.env.WOOPROXY_BASE_URL}/products/ordered/${orderby ?? 'date'}?${query}`,\r\n    );\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data, totalPages } = parsedResponse;\r\n    const products: Product[] = camelcaseKeys(data, { deep: true });\r\n    return {\r\n      products,\r\n      totalPages,\r\n    };\r\n  }\r\n\r\n  static async getSearchedProducts(\r\n    searchTerm: string,\r\n    optionalParams: any = {},\r\n  ) {\r\n    const rawResponse = await fetch(\r\n      `${process.env.WOOPROXY_BASE_URL}/products/search/${searchTerm}`,\r\n      { ...optionalParams },\r\n    );\r\n\r\n    if (!rawResponse.ok) {\r\n      throw new Error();\r\n    }\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data, totalPages } = parsedResponse;\r\n    const products: Product[] = camelcaseKeys(data, { deep: true });\r\n    return {\r\n      products,\r\n      totalPages,\r\n    };\r\n  }\r\n\r\n  static async getProductById(id: number) {\r\n    const rawResponse = await fetch(\r\n      `${process.env.WOOPROXY_BASE_URL}/products/${id}`,\r\n    );\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data } = parsedResponse;\r\n    const product: Product = camelcaseKeys(data, { deep: true });\r\n    return product;\r\n  }\r\n\r\n  static async getCategories() {\r\n    const rawResponse = await fetch(`${process.env.AJAX_URL}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: new URLSearchParams(\r\n        Object.assign({ action: API_PRODUCT_ACTIONS.getCategories }),\r\n      ),\r\n    });\r\n\r\n    const parsedResponse: ApiResponse = await rawResponse.json();\r\n    const { data } = parsedResponse;\r\n    const categories: ProductCategoryWithUrl[] = camelcaseKeys(data, {\r\n      deep: true,\r\n    });\r\n    return categories;\r\n  }\r\n}\r\n"]}